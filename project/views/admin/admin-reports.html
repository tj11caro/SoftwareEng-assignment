<div ng-include="'views/admin/admin-nav.html'">
</div>
<div class="content-wrapper" ng-controller="MainController">
  <div class="container-fluid">
    <!-- Breadcrumbs-->
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="admin.html">Admin Console</a>
      </li>
      <li class="breadcrumb-item active">Prospects</li>
    </ol>
    <div class="col-lg-12">
      <div class="card mb-3">
        <div class="card-header">
          <i class="fa fa-table scrollable">
            <a class="h4"> Prospect List</a>
          </i>
          <form>
            <div class="row control-group pull-right ">
              <div class="col col-auto my-1">
                <label class="mr-sm-2" for="inlineFormCustomSelect">Donors per Page</label>
                <select class="pull-right custom-select mr-sm-2" id="inlineFormCustomSelect" onchange="angular.element(this).scope().setRange(this)">
                  <option selected>10</option>
                  <option value="25">25</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>
              <div class="col col-auto my-1">
                <button class="btn btn-info" ng-click="prospectPageDecrement(getClaimedProspects)">Back</button>
              </div>
              <div class=" col col-auto my-1">
                <button class="btn btn-primary" ng-click="prospectPageIncrement(getClaimedProspects)">{{tableData.buttonText }}</button>
              </div>
            </div>
          </form>
        </div>
        <div class="card-body">
          <div class="table-responsive scrollable table-hover">
            <table class="table table-bordered scrollable" width="100%" cellspacing="0" ng-init="getClaimedProspects()">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Ask Amount</th>
                  <th>Volunteer PIDM</th>
                  <th>Claimed Time</th>
                  <!-- <th>Time Claimed</th> -->
                </tr>
              </thead>
              <tfoot>
                <tr>
                  <th>Name</th>
                  <th>Ask Amount</th>
                  <th>Volunteer PIDM</th>
                  <th>Claimed Time</th>
                  <!-- <th>Time Claimed</th> -->
                </tr>
              </tfoot>
              <tbody data-toggle="tooltip" title="Click for More Information">
                <tr ng-repeat="i in range(tableData.range, prospects)" ng-click="setActiveProspect(i)" data-toggle="modal" data-target="#infoModal">
                  <td>{{ i.DONOR_FIRST_NAME+" "+i.DONOR_LAST_NAME }}</td>
                  <td> {{i.ASK_AMT}} </td>
                  <td>{{ i.AF_ASSIGNED_USER }}</td>
                  <td>{{ i.date }} </td>
                  <!-- <td>{{ i.AF_ASSIGNED_USER }}</td> -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer small text-muted ">Updated yesterday at 11:59 PM</div>
      </div>
    </div>
    <!-- Info Modal-->
    <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content ">
          <div class="modal-header d-inline">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true ">×</span>
            </button>
            <h5 class="modal-title " id="infoModalLabel "> {{ activeProspect.DONOR_FIRST_NAME }} {{ activeProspect.DONOR_MIDDLE_NAME }} {{ activeProspect.DONOR_LAST_NAME
              }}
            </h5>
          </div>
          <form class="form-group p-3 m-3 ">
            <div class="container ">
              <div class="row ">
                <div class="col-md-12 ">
                  <div class="table-responsive ">
                    <div class="table ">
                      <div>
                        <b>Date: </b>
                        {{activeProspect.date}}
                      </div>
                      <span>
                        <b>Flags:</b>
                        {{activeProspect.FLAGS}}
                        <b>Status:</b>
                        {{activeProspect.DONATION_STATUS}}
                        <i class="fa fa-circle " ng-if="activeProspect.DONATION_STATUS=='Not Interested'" style="color:yellow"></i>
                        <i class="fa fa-circle " ng-if="activeProspect.DONATION_STATUS=='Ready To Donate'" style="color:green"></i>
                        <i class="fa fa-circle " ng-if="activeProspect.DONATION_STATUS=='Already Donated'" style="color:red"></i>
                        <i class="fa fa-circle " ng-if="activeProspect.DONATION_STATUS==undefined" style="color:blue"></i>
                      </span>
                      <div class="border rounded p-2 ">
                        <b>Previous Note:</b>
                        <br> {{activeProspect.NOTES}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer mt-5 ">
              <button class="btn btn-secondary " type="button" data-dismiss="modal">Cancel</button>
              <button class="btn btn-primary " type="submit" data-dismiss="modal" ng-click="submitUnclaim(activeProspect.PIDM_KEY,activeProspect.AF_ASSIGNED_USER) ">Unclaim</button>
            </div>
          </form>

          <!-- </div> -->
        </div>
      </div>
    </div>
  </div>
  <!-- /.container-fluid-->
  <!-- /.content-wrapper-->
  <footer class="sticky-footer ">
    <div class="container ">
      <div class="text-center ">
        <small>Copyright © Siena College Annual Fund</small>
      </div>
    </div>
  </footer>
  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded " href="#page-top ">
    <i class="fa fa-angle-up "></i>
  </a>
</div>